See description for the `fn` parameter.
